{'navinfo': {'category': {}, 'street': {}, 'postcode': {}, 'area': {}, 'voice': {}, 'poi': {}, 'hno': {u'\u67e5\u627e\u6709\u51e0\u6761Link\u7684Node\u70b9': u"\tselect *\n\tfrom (\n\t\tselect id, cross_lid , length(replace(cross_lid, '|', ':2 ')::tsvector) as len , regexp_split_to_table(cross_lid, '\\\\|') as linkid\n\t\tFROM org_n\n\t\twhere cross_lid != '0'  and folder = 'shanghai'\n\t) as t \n-- \u8fd9\u91cc\u8868\u793a\u67e5\u627e\u6709\u4e24\u6761\u8fb9\u7684Node\u70b9\n\twhere len = 2"}, 'abbr': {}}, 'other': {'category': {u'\u6240\u6709\u6570\u636e\u5e93\u7684\u540d\u5b57': u' SELECT datname FROM pg_database;'}, 'other': {u'\u7edf\u8ba1\u6240\u6709\u8868\u683c\u7684\u884c\u6570': u"SELECT relname, reltuples\nFROM pg_class r JOIN pg_namespace n\nON (relnamespace = n.oid)\nWHERE relkind = 'r' AND n.nspname = 'public' and relname like 'tbl%'\norder by relname\n\n-- \u8bb0\u5f97\u8fd9\u4e2a\u7edf\u8ba1\u4e0d\u51c6\u786e\uff0c\n-- \u8981\u51c6\u786e\u83b7\u53d6\uff0c\u9700\u8981\u5bf9\u6bcf\u4e2a\u8868\u6267\u884c\nANALYZE  table_name \n-- \u53ef\u4ee5\u5199\u4e00\u4e2a\u51fd\u6570\u89e6\u53d1\u8fd9\u4e2a", u'\u67e5\u770b\u6570\u636e\u5e93\u5b57\u7b26\u7f16\u7801': u"show client_encoding;\t-- \u67e5\u770b\u7f16\u7801\nset client_encoding='utf8' ; -- \u8bbe\u7f6e\u7f16\u7801"}, 'street': {}, 'postcode': {}, 'area': {}, 'voice': {}, 'poi': {}, 'hno': {}, 'abbr': {}}, 'zenrin': {'category': {}, 'street': {}, 'postcode': {}, 'area': {}, 'voice': {}, 'poi': {}, 'hno': {}, 'abbr': {}}, 'tomtom': {'category': {}, 'street': {}, 'postcode': {}, 'area': {u'\u68c0\u67e5CityName\u5c5e\u4e8e\u54ea\u4e2a\u5c42\u7ea7': u"select an.name, code\nfrom org_an       as an\njoin (\n\t select id, feattyp, namelc , 0 as code from temp_org_a0\n\t union\n\t select id, feattyp, namelc,1 from org_a1\n\t union\n\t select id, feattyp, namelc ,2 from org_a2\n\t union\n\t select id, feattyp, namelc ,3 from org_a7\n\t union\n\t select id, feattyp, namelc ,4 from org_a8\n\t union\n\t select id, feattyp, namelc ,5 from org_a9\n   ) as o\n on an.id = o.id \n where an.name like 'Chi\xfare'\n"}, 'voice': {}, 'poi': {u'\u6e90\u6570\u636e\u4e0e\u505a\u6210\u6570\u636eCategory\u4fe1\u606f': u"with tbl as(\n\tselect 'a'::text as flag, genre_id, g.name\n\tfrom tbl_poi_name as p\n\tjoin tbl_poi_info\n\tusing(poi_id)\n\tjoin tbl_genre_name as g\n\tusing(genre_id)\n\twhere p.name ilike 'swiss grand retail%'\n)\n,org as (\n\tselect 'a'::text as flag, id, feattyp, name, subcat, brandname\n\tfrom org_mnpoi_pi\n\twhere name ilike 'swiss grand retail%'\n)\nselect *\nfrom org\njoin tbl\nusing(flag)"}, 'hno': {}, 'abbr': {}}, 'mmi': {'category': {}, 'street': {}, 'postcode': {}, 'area': {}, 'voice': {}, 'poi': {}, 'hno': {}, 'abbr': {}}, 'mid': {'category': {}, 'street': {}, 'postcode': {}, 'area': {}, 'voice': {}, 'poi': {u'\u901a\u8fc7mid_poi_geometry(poi_id)\u627e\u5230tbl_poi_info(poi_id)': u'select tbl_id, org_id1, g.id\nfrom mid_poi_geometry as g\njoin mid_poi_to_geometry as tg\non g.id = tg.geomid\njoin mid_feat_key as f\non tg.key = f.feat_key\njoin temp_poi_uid \nusing (org_id1)\njoin tmp_poi_ext_info as i \nusing(uid)\nwhere g.id in (\n1829835,1829643,1829625,1829618,1829617,1829609\n)'}, 'hno': {}, 'abbr': {}}, 'here': {'category': {u'\u901a\u8fc7Cat_id,Chain_id\u627e\u5230\u76f8\u5173Poi': u"select *\nfrom rdf_poi\njoin rdf_poi_address\nusing(poi_id)\njoin rdf_poi_names \nusing(poi_id)\njoin rdf_poi_name\nusing(name_id)\njoin rdf_poi_chains\nusing(poi_id)\nwhere cat_id = 5511 and chain_id = 250 and iso_country_code = 'VNM'"}, 'street': {}, 'postcode': {}, 'area': {}, 'voice': {}, 'poi': {u'\u901a\u8fc7Poi\u540d\u5b57\u627e\u5230\u5b83\u7684\u5730\u5740\u4fe1\u606f': u"select *\nfrom rdf_poi\njoin rdf_poi_names\nusing(poi_id)\njoin rdf_poi_name\nusing(name_id)\njoin rdf_poi_address\nusing(poi_id)\njoin rdf_location\nusing(location_id)\nwhere name ilike  '%honda%' and iso_country_code = 'THA' \n--  and st_dwithin(st_makepoint( lon/100000.0, lat/100000.0 ), 'point(100.552768 13.896367)', 100)\norder by lat"}, 'hno': {}, 'abbr': {}}, 'tbl': {'category': {}, 'street': {}, 'postcode': {u'\u6bcf\u4e2a\u56fd\u5bb6Postal\u6570\u91cf': u'with a as (\n\tselect iso_country_code, area_0\n\tfrom tbl_area_info\n\tjoin tbl_area_country\n\tusing(area_id)\n)\nselect distinct  iso_country_code, count(distinct postcode) -- postcode , area_0,\nfrom tbl_postcode_info\njoin tbl_area_info as i\nusing(area_id)\njoin a\nusing(area_0)\ngroup by iso_country_code\norder by iso_country_code'}, 'area': {u'\u6bcf\u4e2a\u56fd\u5bb6\u5bf9\u5e94\u7684area_0': u'SELECT distinct area_0,name\n  FROM tbl_area_info\n  join tbl_area_name\n  using(area_id)\n  join tbl_area_country\n  using(area_id)', u'\u6bcf\u4e2a\u56fd\u5bb6\u7684Postcode\u6570\u91cf': u'with a as (\n\tselect iso_country_code, area_0\n\tfrom tbl_area_info\n\tjoin tbl_area_country\n\tusing(area_id)\n)\nselect distinct  iso_country_code, count(distinct postcode) -- postcode , area_0,\nfrom tbl_postcode_info\njoin tbl_area_info as i\nusing(area_id)\njoin a', u'\u901a\u8fc7\u4efb\u610f Area_id \u627e\u5230\u5bf9\u5e94\u7684 iso_country_code': u'with a as (\nselect area_id, area_0, language_code, iso_country_code\nfrom tbl_area_info\njoin tbl_area_country\nusing(area_id)\n)\nselect *\nfrom tbl_area_info as i\njoin a\non i.area_0 = a.area_0', u'\u901a\u8fc7area_id\u627e\u5230\u4e0a\u51e0\u5c42\u540d\u5b57\u7ec4\u5408': u"with temp_area_all_info as (\n\t  select a.area_id,a.area_level,a.area_0,b.area_id as id_0, a.area_1,c.area_id as id_1\n\t\t  ,a.area_2,d.area_id as id_2,a.area_3,e.area_id as id_3,a.area_4,f.area_id as id_4\n\t  from tbl_area_info a\n\t  left join tbl_area_info b\n\t  on a.area_0 = b.area_0 and b.area_level = 0\n\t  left join tbl_area_info c\n\t  on a.area_1 = c.area_1 and a.area_0 = c.area_0 and c.area_level = 1\n\t  left join tbl_area_info d\n\t  on a.area_2 = d.area_2 and a.area_0 = d.area_0 and a.area_1 = d.area_1 and d.area_level = 2\n\t  left join tbl_area_info e\n\t  on a.area_3 = e.area_3 and a.area_0 = e.area_0 and a.area_1 = e.area_1 and a.area_2 = e.area_2 and e.area_level = 3\n\t  left join tbl_area_info f\n\t  on a.area_4 = f.area_4 and a.area_0 = f.area_0 and a.area_1 = f.area_1 and a.area_2 = f.area_2\n\t  and a.area_3 = f.area_3 and f.area_level = 4\n) ,\narea_name as (\n\t  select i.area_id, area_level, name_language, name\n\t  from tbl_area_name as n\n\t  join tbl_area_info as  i\n\t  on n.area_id = i.area_id\n\t  join (select i.area_0, c.language_code\n\t\t  from mid_area_country as c\n\t\t  join tbl_area_info as i\n\t\t  on c.key = i.area_id )as c\n\t  on c.area_0 = i.area_0\n\t  where name_language = c.language_code and name_type = 'ON'\n)\nselect a.area_id, b0.name, b1.name, b2.name, b3.name, b4.name, \nb0.name || COALESCE(b1.name,'')|| COALESCE(b2.name,'')|| COALESCE(b3.name,'')|| COALESCE(b4.name,'')\nfrom temp_area_all_info a\nleft join area_name b0\non a.id_0 = b0.area_id\nleft join area_name b1\non a.id_1 = b1.area_id\nleft join area_name b2\non a.id_2 = b2.area_id\nleft join area_name b3\non a.id_3 = b3.area_id\nleft join area_name b4\non a.id_4 = b4.area_id\n-- \u8981\u627e\u54ea\u4e2aarea_i\uff44\u3000\u5c31\u4fee\u6539\u8fd9\u4e2a\u503c\n-- \u5982\u679c\u8981\u627e\u6240\u6709\u7684\uff0c\u5220\u9664\u8fd9\u6761\u5c31\u884c\nwhere  a.area_id = 3234\norder by b0.name,b1.name, b2.name, b3.name, b4.name\n\n", u'\u539f\u59cb\u6570\u636e\u4e0eTbl\u6570\u636e\u7684Country\u4fe1\u606f\u662f\u5426\u4e00\u81f4': u"select iso_country_code, phone_prefix, house_number_format, language_code, phone_country_code, 'tbl'\nfrom tbl_area_country\nunion all\nselect iso_country_code, phone_prefix, house_number_format, language_code, phone_country_code, 'org'\nfrom rdf_country\norder by iso_country_code"}, 'voice': {}, 'poi': {u'\u6bcf\u4e2a\u9636\u6bb5Poi\u7684\u6570\u91cf': u"with org as (select iso_country_code as iso, count(*) as cn1\n            from (\n              select distinct ad.iso_country_code, p.poi_id\n              from rdf_poi         as p\n              join rdf_poi_address as ad\n              on p.poi_id = ad.poi_id\n            ) as t\n            group by iso_country_code),\norg_tbl as (select iso_country_code as iso, count(*) as tbl_cn\n            from (\n              select distinct ad.iso_country_code, ad.poi_id\n              from tmp_poi as p\n              join mid_feat_key as k\n              on p.key = k.feat_key\n              join rdf_poi_address as ad\n              on k.org_id1 = ad.poi_id\n            ) as t\n            group by iso_country_code\n            order by iso_country_code),\nnoname as (select iso_country_code as iso , count(*) as noname_cn\n            from (\n               select  ad.iso_country_code, p.poi_id\n               from rdf_poi         as p\n               join rdf_poi_address as ad\n                 on p.poi_id = ad.poi_id\n               left join rdf_poi_names  as ns\n                 on p.poi_id = ns.poi_id\n               left join rdf_poi_chains  as c\n                 on ns.poi_id = c.poi_id and c.chain_type = '1'\n               where ns.poi_id is null and ( p.cat_id != 5511 or\n                       c.chain_id  in (250,251)  )\n            ) as t\n            group by iso_country_code\n            order by iso_country_code),\norg_dup as (select iso_country_code as iso, count(*) as dup_cn\n              from (\n                   select distinct ad.iso_country_code, ad.poi_id\n                   from tmp_poi_duplicate as p\n                   join mid_feat_key as k\n                     on p.key = k.feat_key\n                   join rdf_poi_address as ad\n                     on k.org_id1 = ad.poi_id\n                   where save = 'N'\n              ) as t\n              group by iso_country_code),\nsame as (select iso_country_code as iso, count(*) same_cn\n              from (\n                    select distinct ad.iso_country_code, p1.poi_id\n                    from rdf_poi_association   as a\n                    join rdf_poi               as p1\n                        on a.poi_id = p1.poi_id\n                    join rdf_poi_address       as ad\n                        on p1.poi_id = ad.poi_id\n                    join rdf_poi               as p2\n                        on a.primary_poi_id = p2.poi_id\n                    where  association_type = '1'\n                      and a.poi_id != a.primary_poi_id\n                      and p1.cat_id = p2.cat_id\n                      and a.primary_poi_id is not null\n              ) as t\n              group by iso_country_code\n              order by iso_country_code),\nnocity as (select iso_country_code as iso , count(*) as nocity_cn\n              from(\n                  select distinct p.iso_country_code, p.poi_id\n                  from rdf_poi_address as p\n                  left join rdf_admin_hierarchy    as a8\n                  on p.order8_id = a8.admin_place_id\n                  where a8.admin_place_id is null\n              ) as t\n              group by iso_country_code\n              order by iso_country_code),\ndealer as (select iso_country_code as iso, count(*) as dealer_cn\n                from (\n                    select distinct  p.poi_id, ad.iso_country_code\n                    from  rdf_poi as p\n                    join rdf_poi_address       as ad\n                          on p.poi_id = ad.poi_id\n                    left join rdf_poi_chains  as c\n                        on p.poi_id = c.poi_id and c.chain_type = '1'\n                    where p.cat_id = 5511 and  ( c.chain_id not in (250,251) or c.chain_id is null )\n                    order by p.poi_id\n                )as t\n                group by iso_country_code\n                order by iso_country_code)\nselect org.iso , cn1, \ncase when same_cn is null then dup_cn \nwhen dup_cn is null then  same_cn\nelse dup_cn + same_cn end as dup,  nocity_cn, noname_cn, dealer_cn, tbl_cn\nfrom org\njoin org_tbl\non org.iso = org_tbl.iso\nleft join noname\non org.iso = noname.iso\nleft join org_dup\non org.iso = org_dup.iso\nleft join same\non org.iso = same.iso\nleft join nocity\non org.iso = nocity.iso\nleft join dealer\non org.iso = dealer.iso\norder by org.iso", u'tbl_poi_info(poi_id)\u627e\u5230Poi\u5176\u4ed6\u4fe1\u606f': u'select *\nfrom tbl_poi_info\njoin tbl_poi_name\nusing(poi_id)\nleft join tbl_poi_name_translation\nusing(name_id)\njoin tbl_poi_address\nusing(poi_id)\nwhere poi_id = 544303\n', u'\u505a\u6210Poi\u4e2dCategory\u662f\u5426\u5168\u5305\u542b': u'with a as (\n\tselect distinct genre_id\n\tfrom temp_org_category\n\twhere genre_id not in (\n\tselect distinct genre_id\n\tfrom  tbl_poi_info\n\t)\n)\nselect genre_id, name, org_code1\nfrom temp_org_category_name\njoin temp_org_category\nusing(genre_id)\njoin a \nusing(genre_id)\nwhere org_code1 is not null', u'\u901a\u8fc7Poi\u540d\u5b57\u627e\u5230\u5176\u5730\u5740': u"select *\nfrom tbl_poi_info\njoin tbl_poi_name\nusing(poi_id)\nwhere lower(name) like '%%'", u'\u901a\u8fc7Poi\u540d\u79f0\u548c\u56fd\u5bb6\u627e\u76f8\u5173\u6570\u636e': u"select *\nfrom tbl_poi_name\njoin tbl_poi_info\nusing(poi_id)\njoin tbl_area_info as ai\nusing(area_id)\njoin tbl_area_info as ai2\non ai.area_0 = ai2.area_0 and ai2.area_level = 0\njoin tbl_area_country as ci\non ai2.area_id = ci.area_id\nwhere name ilike '%honda%'  and iso_country_code = 'THA'"}, 'hno': {u'\u901a\u8fc7\u5305\u542b\u6240\u6709City\u5c42\u7ea7\u7684Hno\u5168\u79f0': u"with a as (\nwith temp_area_all_info as (\n\t  select a.area_id,a.area_level,a.area_0,b.area_id as id_0, a.area_1,c.area_id as id_1\n\t\t  ,a.area_2,d.area_id as id_2,a.area_3,e.area_id as id_3,a.area_4,f.area_id as id_4\n\t  from tbl_area_info a\n\t  left join tbl_area_info b\n\t  on a.area_0 = b.area_0 and b.area_level = 0\n\t  left join tbl_area_info c\n\t  on a.area_1 = c.area_1 and a.area_0 = c.area_0 and c.area_level = 1\n\t  left join tbl_area_info d\n\t  on a.area_2 = d.area_2 and a.area_0 = d.area_0 and a.area_1 = d.area_1 and d.area_level = 2\n\t  left join tbl_area_info e\n\t  on a.area_3 = e.area_3 and a.area_0 = e.area_0 and a.area_1 = e.area_1 and a.area_2 = e.area_2 and e.area_level = 3\n\t  left join tbl_area_info f\n\t  on a.area_4 = f.area_4 and a.area_0 = f.area_0 and a.area_1 = f.area_1 and a.area_2 = f.area_2\n\t  and a.area_3 = f.area_3 and f.area_level = 4\n) ,\narea_name as (\n\t  select i.area_id, area_level, name_language, name\n\t  from tbl_area_name as n\n\t  join tbl_area_info as  i\n\t  on n.area_id = i.area_id\n\t  join (select i.area_0, c.language_code\n\t\t  from mid_area_country as c\n\t\t  join tbl_area_info as i\n\t\t  on c.key = i.area_id )as c\n\t  on c.area_0 = i.area_0\n\t  where name_language = c.language_code and name_type = 'ON'\n)\nselect a.area_id, b0.name, b1.name, b2.name, b3.name, b4.name, \nb0.name || COALESCE(b1.name,'')|| COALESCE(b2.name,'')|| COALESCE(b3.name,'')|| COALESCE(b4.name,'') as cityname\nfrom temp_area_all_info a\nleft join area_name b0\non a.id_0 = b0.area_id\nleft join area_name b1\non a.id_1 = b1.area_id\nleft join area_name b2\non a.id_2 = b2.area_id\nleft join area_name b3\non a.id_3 = b3.area_id\nleft join area_name b4\non a.id_4 = b4.area_id\n\norder by b0.name,b1.name, b2.name, b3.name, b4.name\n)  \nSELECT address_point_id, name_id, language, building_name, building_no, \n       cityname || house_number \n  FROM tbl_address_point_address\n  join tbl_address_point \n  using(address_point_id)\n  join a\n  using(area_id)"}, 'abbr': {}}}